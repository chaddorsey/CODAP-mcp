# Product Backlog

| ID | Actor | User Story | Status | Conditions of Satisfaction (CoS) |
| :-- | :---- | :--------- | :----- | :------------------------------- |
| 1 | Plugin Developer | As a plugin developer, I want a Vercel relay that can create sessions and stream tool-invocation events via SSE so that LLMs can communicate with the browser without local servers. | Proposed | • `POST /api/sessions` returns code & TTL<br>• `GET /stream`, `/request`, `/response` implemented with KV store<br>• Works in dev deployment; automated integration tests pass |
| 2 | End User | As an end user, I want the CODAP plugin to display a pairing banner with copy-prompt/code actions so that I can easily connect an LLM session. | Proposed | • Banner visible on load with 8-char code<br>• Countdown timer updates<br>• Copy prompt includes code, relay URL, instructions<br>• UX meets accessibility spec |
| 3 | Browser Worker | As a browser worker, I want to fetch tool requests via SSE (with polling fallback) and post results so that CODAP executes LLM commands in real time. | Proposed | • EventSource connection established<br>• Fallback to 1 s polling when SSE fails<br>• Successful round-trip shown in demo |
| 4 | LLM Agent | As an LLM agent, I want to retrieve a JSON-Schema tool manifest for the current session so that I can build correctly-shaped MCP calls. | Proposed | • `GET /metadata` returns manifest derived from registry<br>• Version field included<br>• Sample schema validated against JSON Schema draft-07 |
| 5 | Security Engineer | As a security engineer, I want enforced TTL, 40-bit code entropy and rate-limiting on `/request` so that sessions remain secure. | Proposed | • Codes auto-expire after 10 min<br>• Collision probability documented<br>• 60 req/min IP+code limit applied |
| 6 | DevOps | As DevOps, I want structured logs and basic metrics from both relay and browser so that we can monitor reliability. | Proposed | • Edge/Serverless logs include requestId & latency<br>• Browser logs throttle to info level<br>• 95th latency alert configured |
| 7 | Integrator | As an integrator, I want a `.well-known/codap-mcp.json` descriptor so that automated clients can self-configure. | Proposed | • Endpoint serves JSON per PRD<br>• Links to request/response schemas<br>• Cache-control max-age=3600 |
| 8 | QA | As QA, I want a Playwright E2E test covering the full pair-and-execute happy path so that we prevent regressions. | Proposed | • Test spins up CODAP, establishes session, issues createCase, verifies response<br>• Runs in CI on every PR |
| 9 | Performance Engineer | As a performance engineer, I want the relay to scale to 1 000 concurrent sessions and document the path to 5 000 so that we can support beta launch. | Proposed | • Load test report shows ≤1 s 95th latency at 1 000 sessions<br>• Scaling plan with KV & Edge concurrency outlined |
| 10 | Accessibility Specialist | As an accessibility specialist, I want the pairing UI to meet WCAG AA so that all users can benefit. | Proposed | • Colour contrast ≥4.5:1<br>• ARIA-live announcements verified by screen readers<br>• Keyboard shortcuts documented | 