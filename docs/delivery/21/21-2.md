# 21-2 Implement Capability Registration at Session Creation

[Back to task list](./tasks.md)

## Description
Extend the plugin and server to support capability registration when creating a session, allowing the plugin to specify its supported tool sets (e.g., CODAP, SageModeler). This enables dynamic filtering of available tools per session.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| YYYY-MM-DD HH:MM:SS | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements
- Update the plugin to send a list of capabilities when creating a session
- Update the server to accept and store session capabilities
- Define and document the capability format (e.g., array of strings)
- Ensure backward compatibility for sessions without explicit capabilities
- Add tests to verify capability registration and storage

## Implementation Plan
1. Update the plugin session creation logic to include capabilities
2. Update the server session creation endpoint to accept and store capabilities
3. Define and document the capability format and validation
4. Ensure backward compatibility for legacy sessions
5. Add or update tests for capability registration
6. Document the new capability registration process

## Verification
- Plugin sends capabilities at session creation
- Server stores and validates session capabilities
- Tests pass for sessions with and without capabilities
- Documentation is updated

## Files Modified
- `src/services/SessionService.ts` (plugin session logic)
- `api/sessions.js` (server session endpoint)
- `src/test/services/SessionService.test.ts` (tests)
- Documentation as needed 