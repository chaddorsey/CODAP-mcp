# 21-5 Update Metadata Endpoint for Per-Session Tool Exposure

[Back to task list](./tasks.md)

## Description
Ensure the /metadata endpoint returns only the tools available for the current session context and capabilities, supporting dynamic tool exposure and capability-based filtering.

## Status History
| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| YYYY-MM-DD HH:MM:SS | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements
- Update the /metadata endpoint to filter tools by session capabilities
- Ensure correct tool exposure for each session context
- Add tests to verify endpoint behavior for various capability sets
- Document the updated endpoint behavior

## Implementation Plan
1. Update the /metadata endpoint to filter tools by session capabilities
2. Ensure endpoint returns correct tool list for each session
3. Add or update tests for endpoint behavior
4. Document the updated endpoint and usage

## Verification
- /metadata endpoint returns correct tool list per session
- Tests pass for various capability sets
- Documentation is updated

## Files Modified
- `api/metadata.js` (endpoint logic)
- `server/tool-registry.js` (registry filtering)
- `src/test/` (add/update endpoint tests)
- Documentation as needed 